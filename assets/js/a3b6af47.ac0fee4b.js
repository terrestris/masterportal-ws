"use strict";(self.webpackChunkmasterportal_ws_2=self.webpackChunkmasterportal_ws_2||[]).push([[653],{1027:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/files/startModule-40c6c4706d0dd3527e89cbd9b43fc23c.png"},5091:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/startModule-40c6c4706d0dd3527e89cbd9b43fc23c.png"},6728:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"config/portalConfig","title":"Portalkonfiguration","description":"config.js","source":"@site/docs/config/02-portalConfig.md","sourceDirName":"config","slug":"/config/portalConfig","permalink":"/masterportal-ws/config/portalConfig","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Globale Konfiguration","permalink":"/masterportal-ws/config/globalConfig"},"next":{"title":"Dokumentation","permalink":"/masterportal-ws/docs/"}}');var l=i(4848),r=i(8453);const s={},o="Portalkonfiguration",a={},d=[{value:"config.js",id:"configjs",level:2},{value:"config.json",id:"configjson",level:2},{value:"portalConfig",id:"portalconfig",level:3},{value:"Neu in v3 \u2728",id:"neu-in-v3-",level:4},{value:"Schnell aufrufbare Tools in der Control-Leiste:",id:"schnell-aufrufbare-tools-in-der-control-leiste",level:5},{value:"expandable",id:"expandable",level:5},{value:"openConfig",id:"openconfig",level:5},{value:"Sections",id:"sections",level:4},{value:"layerConfig",id:"layerconfig",level:3}];function c(n){const e={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"portalkonfiguration",children:"Portalkonfiguration"})}),"\n",(0,l.jsx)(e.h2,{id:"configjs",children:"config.js"}),"\n",(0,l.jsx)(e.p,{children:"Hier werden s\xe4mtliche Konfigurationen vorgenommen, die nicht direkt auf UI-Elemente oder Layer bezogen sind:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Pfade zu Backends und weiteren Konfigurationsdateien"}),"\n",(0,l.jsx)(e.li,{children:"Projektionsdefinitionen im Portal"}),"\n",(0,l.jsx)(e.li,{children:"Liste an Addons"}),"\n",(0,l.jsx)(e.li,{children:"Proxy Einstellungen"}),"\n",(0,l.jsx)(e.li,{children:"Footer"}),"\n",(0,l.jsx)(e.li,{children:"mousehover"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.8.0/User/Portal-Config/config.js/",children:"Link zur vollst\xe4ndigen Dokumentation"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Beispiel-Konfiguration:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:'// eslint-disable-next-line no-unused-vars\nconst Config = {\n  addons: ["myAddon"],\n  ignoredKeys: ["BOUNDEDBY", "SHAPE", "SHAPE_LENGTH", "SHAPE_AREA", "OBJECTID", "GLOBALID", "GEOMETRY", "SHP", "SHP_AREA", "SHP_LENGTH", "GEOM"],\n  namedProjections: [\n    // ETRS89 UTM\n    ["EPSG:25832", "+title=ETRS89/UTM 32N +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],\n    // WGS84\n    ["EPSG:4326", "+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"]\n  ],\n  layerConf: "https://geodienste.hamburg.de/services-internet.json",\n  restConf: "https://geodienste.hamburg.de/lgv-config/rest-services-internet.json",\n  styleConf: "https://geodienste.hamburg.de/lgv-config/style_v3.json",\n  wfsImgPath: "https://geodienste.hamburg.de/lgv-config/img/",\n  portalLanguage: {\n    enabled: true,\n    debug: false,\n    languages: {\n      de: "Deutsch",\n      en: "English",\n      es: "Espa\xf1ol",\n      it: "Italiano",\n      platt: "Platt",\n      pt: "Portugu\xeas",\n      ru: "\u0420\u0443\u0441\u0441\u043a\u0438\u0439",\n      tr: "T\xfcrk\xe7e",\n      ua: "\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"\n    },\n    fallbackLanguage: "de",\n    changeLanguageOnStartWhen: ["querystring", "localStorage", "htmlTag"]\n  }\n};\n'})}),"\n",(0,l.jsx)(e.h2,{id:"configjson",children:"config.json"}),"\n",(0,l.jsxs)(e.p,{children:["Die ",(0,l.jsx)(e.code,{children:"config.json"})," enth\xe4lt die gesamte Konfiguration der Portal-Oberfl\xe4che. In ihr wird definiert, welche Elemente sich wo in der Men\xfcleiste befinden, wo das initiale Kartenzentrum liegen soll und welche Layer geladen werden sollen. Des weiteren wird die Liste der Tools und Addons definiert und die dazugeh\xf6rige Start-Konfiguration festgelegt."]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Version 3:"})," Hier gab es einige \xc4nderungen, da das Men\xfc anders aufgebaut ist und folglich anders konfiguriert wird."]}),"\n",(0,l.jsx)(e.h3,{id:"portalconfig",children:"portalConfig"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Schaltfl\xe4chen auf der Kartenansicht sowie m\xf6gliche Interaktionen (controls)"}),"\n",(0,l.jsx)(e.li,{children:"Informationsabfrage von Layern (getFeatureInfo)"}),"\n",(0,l.jsx)(e.li,{children:"Men\xfceintr\xe4ge jeweiliger Tools und deren Reihenfolge (menu)"}),"\n",(0,l.jsxs)(e.li,{children:["Starteinstellungen der Kartenansicht (mapView)","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Background-Image"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"Eintr\xe4ge im Zweit-Men\xfc sowie Reihenfolge (secondaryMenu)"}),"\n",(0,l.jsx)(e.li,{children:"Titel & Logo (portalTitle)"}),"\n",(0,l.jsx)(e.li,{children:"Layer/Themenauswahl (tree)"}),"\n",(0,l.jsxs)(e.li,{children:["PortalFooter","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Liste von Urls"}),"\n",(0,l.jsx)(e.li,{children:"Ma\xdfstabsleiste"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"neu-in-v3-",children:"Neu in v3 \u2728"}),"\n",(0,l.jsx)(e.h5,{id:"schnell-aufrufbare-tools-in-der-control-leiste",children:"Schnell aufrufbare Tools in der Control-Leiste:"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(1027).A+"",children:(0,l.jsx)(e.img,{alt:"Startmodul",src:i(5091).A+"",width:"168",height:"337"})})}),"\n",(0,l.jsx)(e.p,{children:"Startmodul innerhalb der controls-Defintion:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'"controls": {\n  "startModule": {\n    "secondaryMenu": [\n      {\n        "type": "addWMS"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h5,{id:"expandable",children:"expandable"}),"\n",(0,l.jsxs)(e.p,{children:["Mit ",(0,l.jsx)(e.em,{children:"expandable"})," sind die Bedienelemente hinter einem Button mit drei Punkten versteckt und k\xf6nnen bei Bedarf aufgeklappt werden:"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'"controls": {\n  "backForward": true,\n  "fullScreen": true,\n  "expandable": {\n    "button3d": true\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h5,{id:"openconfig",children:"openConfig"}),"\n",(0,l.jsx)(e.p,{children:"Konfiguration zur Laufzeit laden:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "icon": "bi-upload",\n  "name": "common:modules.openConfig.name",\n  "type": "openConfig"\n}\n'})}),"\n",(0,l.jsx)(e.h4,{id:"sections",children:"Sections"}),"\n",(0,l.jsx)(e.p,{children:"Untergliederung der Module in den Men\xfcs nach sections. Trennung durch eine horizontale Linie."}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.p,{children:["Beispiel aus der ",(0,l.jsx)(e.code,{children:"basic"})," Portalkonfiguration:"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "portalConfig": {\n    "map": {\n      "controls": {\n        "zoom": true,\n        "orientation": {\n          "zoomMode": "once"\n        }\n      },\n      "mapView": {\n        "backgroundImage": "./resources/img/backgroundCanvas.jpeg",\n        "startCenter": [\n          561210,\n          5932600\n        ],\n        "extent": [\n          510000.0,\n          5850000.0,\n          625000.4,\n          6000000.0\n        ],\n        "startZoomLevel": 1\n      }\n    },\n    "portalFooter": {\n      "urls": [\n        {\n          "bezeichnung": "common:modules.portalFooter.designation",\n          "url": "https://geoinfo.hamburg.de/",\n          "alias": "Landesbetrieb Geoinformation und Vermessung",\n          "alias_mobil": "LGV"\n        }\n      ]\n    },\n    "tree": {\n      "highlightedFeatures": {\n        "active": true\n      }\n    },\n    "mainMenu": {\n      "expanded": true,\n      "title": {\n        "text": "Basic",\n        "logo": "./resources/img/mp_logo.png",\n        "link": "https://masterportal.org",\n        "toolTip": "Masterportal"\n      },\n      "searchBar": {\n        "searchInterfaces": [\n          {\n            "type": "komootPhoton",\n            "minChars": 3,\n            "serviceId": "11",\n            "limit": 10,\n            "lang": "de",\n            "lat": 53.6,\n            "lon": 10.0,\n            "bbox": "9.6,53.3,10.4,53.8"\n          },\n          {\n            "type": "visibleVector",\n            "resultEvents": {\n              "onClick": [\n                "openGetFeatureInfo",\n                "setMarker",\n                "zoomToResult"\n              ],\n              "onHover": [\n                "setMarker"\n              ]\n            }\n          },\n          {\n            "type": "topicTree",\n            "hitTemplate": "layer"\n          }\n        ]\n      },\n      "sections": [\n        [\n          {\n            "type": "fileImport"\n          },\n          {\n            "type": "openConfig"\n          },\n          {\n            "type": "contact",\n            "serviceId": "80001",\n            "includeSystemInfo": true,\n            "from": [\n              {\n                "email": "lgvgeoportal-hilfe@gv.hamburg.de",\n                "name": "LGVGeoportalHilfe"\n              }\n            ],\n            "to": [\n              {\n                "email": "lgvgeoportal-hilfe@gv.hamburg.de",\n                "name": "LGVGeoportalHilfe"\n              }\n            ]\n          },\n          {\n            "type": "language"\n          }\n        ]\n      ]\n    },\n    "secondaryMenu": {\n      "expanded": false,\n      "sections": [\n        [\n          {\n            "type": "wfst",\n            "name": "WFS-T Tool",\n            "layerIds": [\n              "lgvline",\n              "lgvpoint",\n              "lgvpolygon"\n            ],\n            "toggleLayer": false,\n            "lineButton": [\n              {\n                "layerId": "lgvline",\n                "available": true\n              }\n            ],\n            "pointButton": [\n              {\n                "layerId": "lgvpoint",\n                "available": true\n              }\n            ],\n            "polygonButton": [\n              {\n                "layerId": "lgvpolygon",\n                "available": true\n              }\n            ],\n            "update": "Bearbeiten!",\n            "delete": true\n          },\n          {\n            "type": "legend"\n          },\n          {\n            "type": "scaleSwitcher"\n          },\n          {\n            "type": "shareView"\n          },\n          {\n            "type": "measure"\n          },\n          {\n            "type": "coordToolkit",\n            "heightLayerId": "19173",\n            "heightElementName": "value_0",\n            "heightValueWater": "-20",\n            "heightValueBuilding": "200",\n            "zoomLevel": 5\n          },\n          {\n            "type": "bufferAnalysis"\n          },\n          {\n            "type": "layerSlider",\n            "layerIds": [\n              {\n                "title": "common:modules.layerSlider.serviceOne",\n                "layerId": "19173"\n              },\n              {\n                "title": "common:modules.layerSlider.serviceTwo",\n                "layerId": "2426"\n              },\n              {\n                "title": "common:modules.layerSlider.serviceThree",\n                "layerId": "8712.2"\n              },\n              {\n                "title": "common:modules.layerSlider.serviceFour",\n                "layerId": "1711"\n              }\n            ]\n          },\n          {\n            "type": "layerClusterToggler",\n            "layerIdList": [\n              "8712.1",\n              "8712.2",\n              "8712.3",\n              "8712.4"\n            ]\n          }\n        ]\n      ]\n    }\n  },\n  "layerConfig": {\n    "baselayer": {\n      "elements": [\n        {\n          "id": "453",\n          "visibility": true\n        },\n        {\n          "id": "452"\n        },\n        {\n          "id": [\n            "717",\n            "718",\n            "719",\n            "720",\n            "13712",\n            "13709",\n            "13714",\n            "13716"\n          ],\n          "name": "Geobasiskarten (farbig)"\n        },\n        {\n          "id": "topplus_wmts",\n          "name": "TopPlusOpen (WMTS)",\n          "typ": "WMTS",\n          "visibility": false,\n          "showInLayerTree": true\n        }\n      ]\n    },\n    "subjectlayer": {\n      "elements": [\n        {\n          "id": [ "3302", "4561"],\n          "name": "WMS-Gruppe Trinkwasser und Eventlotse (min-/maxScale 1:1.000 - 1:10.000)",\n          "typ": "GROUP",\n          "visibility": true,\n          "showInLayerTree": true\n        },\n        {\n          "id": "lgvline",\n          "name": "wfst_linie_test",\n          "visibility": false,\n          "typ": "WFS"\n        },\n        {\n          "id": "lgvpoint",\n          "name": "wfst_punkt_test",\n          "visibility": false,\n          "typ": "WFS"\n        },\n        {\n          "id": "lgvpolygon",\n          "name": "wfst_polygon_test",\n          "visibility": false,\n          "typ": "WFS"\n        },\n        {\n          "id": "2426",\n          "name": "WMS Bezirke",\n          "layerAttribution": "<span>Hier Text angeben, der angezeigt wird sobald der Layer sichtbar ist.</span>"\n        },\n        {\n          "id": "2003",\n          "name": "WFS Schutzgebiete",\n          "styleId": "2003",\n          "mouseHoverField": "gebietsname"\n        },\n        {\n          "id": "10882",\n          "name": "WFS Bike and Ride Parkpl\xe4tze",\n          "styleId": "10882",\n          "clusterDistance": 40,\n          "styleGeometryType": [\n            "Point"\n          ]\n        },\n        {\n          "id": "1711",\n          "name": "WFS Krankenh\xe4user",\n          "styleId": "1711",\n          "mouseHoverField": "name",\n          "searchField": "name"\n        },\n        {\n          "id": "8712",\n          "name": "WFS Schulen",\n          "styleId": "8712",\n          "mouseHoverField": [\n            "schulname",\n            "kapitelbezeichnung"\n          ],\n          "searchField": [\n            "schulname",\n            "fremdsprache"\n          ]\n        },\n        {\n          "id": "4560",\n          "name": "WFS Polygon (Default Style)"\n        },\n        {\n          "id": "1132",\n          "name": "WFS Point (Default Style)"\n        },\n        {\n          "id": "1133",\n          "name": "WFS Line (Default Style)"\n        },\n        {\n          "id": "18105",\n          "name": "STA Anzahl frei verf\xfcgbarer Fahrr\xe4der je StadtRad-Station"\n        },\n        {\n          "id": "8712.1",\n          "styleId": "8712.1",\n          "name": "Grundschulen",\n          "wfsFilter": "resources/xml/schulstandort.staatlich.5.grundschulen.xml",\n          "typ": "WFS",\n          "visibility": false,\n          "clusterDistance": 60,\n          "mouseHoverField": [\n            "schulname",\n            "kapitelbezeichnung"\n          ],\n          "showInLayerTree": true\n        },\n        {\n          "id": "8712.2",\n          "styleId": "8712.2",\n          "name": "Stadtteilschulen",\n          "wfsFilter": "resources/xml/schulstandort.staatlich.5.stadtteilschulen.xml",\n          "typ": "WFS",\n          "visibility": false,\n          "clusterDistance": 60,\n          "mouseHoverField": [\n            "schulname",\n            "kapitelbezeichnung"\n          ],\n          "showInLayerTree": true\n        },\n        {\n          "id": "8712.3",\n          "styleId": "8712.3",\n          "name": "Gymnasien",\n          "wfsFilter": "resources/xml/schulstandort.staatlich.5.gymnasien.xml",\n          "typ": "WFS",\n          "visibility": false,\n          "clusterDistance": 60,\n          "mouseHoverField": [\n            "schulname",\n            "kapitelbezeichnung"\n          ]\n        },\n        {\n          "id": "8712.4",\n          "styleId": "8712.4",\n          "name": "Sonderschulen",\n          "wfsFilter": "resources/xml/schulstandort.staatlich.5.sonderschulen.xml",\n          "typ": "WFS",\n          "visibility": false,\n          "clusterDistance": 60,\n          "mouseHoverField": [\n            "schulname",\n            "kapitelbezeichnung"\n          ]\n        }\n      ]\n    }\n  }\n}\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"layerconfig",children:"layerConfig"}),"\n",(0,l.jsxs)(e.p,{children:["Die layerConfig definiert, welche Inhalte an welcher Stelle im Themenbaum vorkommen.",(0,l.jsx)(e.br,{}),"\n","Die Struktur ist abh\xe4ngig von der Art des Themenbaums (ob flache Hierachie oder Aufsplittung on Fach- und Hintergrundkarten).",(0,l.jsx)(e.br,{}),"\n","Zudem k\xf6nnen mehrdimensionale Daten (Time und 3D) separat definiert werden."]}),"\n",(0,l.jsx)(e.p,{children:"Ein Minimal-Beispiel:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "layerConfig": {\n    "baselayer": {\n      "elements": [\n        {\n          "id": "452"\n        },\n        {\n          "id": "432"\n        }\n      ]\n    },\n    "subjectlayer": {\n      "elements": [\n        {\n          "name": "My Folder",\n          "type": "folder",\n          "elements": [\n            {\n              "id": "10882"\n            },\n            {\n              "id": "10883"\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.8.0/User/Portal-Config/config.json/",children:"Link zur vollst\xe4ndigen Dokumentation"})})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>o});var t=i(6540);const l={},r=t.createContext(l);function s(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);