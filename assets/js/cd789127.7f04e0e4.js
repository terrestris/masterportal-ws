"use strict";(self.webpackChunkmasterportal_ws_2=self.webpackChunkmasterportal_ws_2||[]).push([[784],{4674:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"config/globalConfig","title":"Globale Konfiguration","description":"services.json","source":"@site/docs/config/01-globalConfig.md","sourceDirName":"config","slug":"/config/globalConfig","permalink":"/masterportal-ws/config/globalConfig","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Konfiguration","permalink":"/masterportal-ws/config/"},"next":{"title":"Portalkonfiguration","permalink":"/masterportal-ws/config/portalConfig"}}');var s=i(4848),t=i(8453);const l={},o="Globale Konfiguration",a={},d=[{value:"services.json",id:"servicesjson",level:2},{value:"WMS",id:"wms",level:3},{value:"WMTS",id:"wmts",level:3},{value:"rest-services.json",id:"rest-servicesjson",level:2},{value:"style.json",id:"stylejson",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"globale-konfiguration",children:"Globale Konfiguration"})}),"\n",(0,s.jsx)(n.h2,{id:"servicesjson",children:"services.json"}),"\n",(0,s.jsxs)(n.p,{children:["Dies ist die zentrale Konfiguration f\xfcr s\xe4mtliche Layer (WMS, WFS, WMTS, SensorThings-API, GeoJSON and weitere)\ndie in dem Portal dargestellt werden sollen. Sie wird in den jeweiligen Portalkonfigurationen (",(0,s.jsx)(n.code,{children:"config.js"}),")\nreferenziert. Es kann auch auf einen API-Endpunkt verwiesen werden, der die ",(0,s.jsx)(n.code,{children:"services.json"})," Datei generiert - etwa\n\xfcber einen ",(0,s.jsx)(n.a,{href:"https://bitbucket.org/geowerkstatt-hamburg/udp-manager/src",children:"UDP Manager"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Jeder Layertyp ben\xf6tigt unterschiedliche Parameter, wobei einige stets obligatorisch und andere optional sind."}),"\n",(0,s.jsx)(n.h3,{id:"wms",children:"WMS"}),"\n",(0,s.jsxs)(n.p,{children:["Ein Beispiel f\xfcr einen ",(0,s.jsx)(n.strong,{children:"WMS-Layer"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id" : "8",\n  "name" : "Aerial View DOP 10",\n  "url" : "https://geodienste.hamburg.de/HH_WMS_DOP10",\n  "typ" : "WMS",\n  "layers" : "1",\n  "format" : "image/jpeg",\n  "version" : "1.3.0",\n  "singleTile" : false,\n  "transparent" : true,\n  "tilesize" : "512",\n  "gutter" : "0",\n  "minScale" : "0",\n  "maxScale" : "1000000",\n  "gfiAttributes" : "ignore",\n  "layerAttribution" : "nicht vorhanden",\n  "legend" : false,\n  "layerSequence": 1,\n  "datasets": [\n    {\n      "md_id": "25DB0242-D6A3-48E2-BAE4-359FB28491BA",\n      "rs_id": "HMDK/25DB0242-D6A3-48E2-BAE4-359FB28491BA",\n      "md_name": "Digitale Orthophotos 10cm - FHHNET",\n      "bbox": "461468.97,5916367.23,587010.91,5980347.76",\n      "kategorie_opendata": [\n        "Sonstiges"\n      ],\n      "kategorie_inspire": [\n        "nicht INSPIRE-identifiziert"\n      ],\n      "kategorie_organisation": "Landesbetrieb Geoinformation und Vermessung"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Hier sind zahlreiche Parameter angegeben, die den Layer optimal definieren. Beispielsweise bewirkt\ndie ",(0,s.jsx)(n.code,{children:"gfiAttributes: false"})," Parametereinstellung, dass keine Sachdatenabfrage (GetFeatureInfo)\nausgef\xfchrt wird. ",(0,s.jsx)(n.code,{children:'tilesize" : "512"'})," sorgt daf\xfcr, dass die Kacheln des WMS in einer Gr\xf6\xdfe von\n512x512 Pixeln abgefragt werden (default 256px)."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Hinweis"})}),"\n",(0,s.jsxs)(n.p,{children:["Die Parameter bedingen sich teilweise gegenseitig bzw. sind voneinander abh\xe4ngig. Bei ungew\xfcnschten Verhalten der Layer sollte die vollst\xe4ndige Dokumentation ausf\xfchrlich studiert werden.",(0,s.jsx)(n.br,{}),"\n","Ein Beispiel: ",(0,s.jsx)(n.code,{children:"singleTile: true"})," hat zur Folge, dass der Ausschnitt als einzelne Kachel vom WMS abgefragt wird. ",(0,s.jsx)(n.code,{children:"tileSize"})," hat dann nat\xfcrlich keinen Effekt mehr."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"wmts",children:"WMTS"}),"\n",(0,s.jsxs)(n.p,{children:["Ein Beispiel, das nur wenige Konfigurationsparameter bedarf ist ein ",(0,s.jsx)(n.code,{children:"WMTS"}),", wenn der Parameter ",(0,s.jsx)(n.code,{children:"optionsFromCapabilities"})," gesetzt ist:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "2020",\n  "name": "EOC Basemap",\n  "capabilitiesUrl": "https://tiles.geoservice.dlr.de/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities",\n  "typ": "WMTS",\n  "layers": "eoc:basemap",\n  "optionsFromCapabilities": true\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Hier muss ber\xfccksichtigt werden, dass die Kacheln in der Projektion des ersten TileGrid angefragt werden,\ndass im Capabilities auftaucht (zumeist EPSG:3857). OpenLayers \xfcbernimmt im Client die\n",(0,s.jsx)(n.a,{href:"https://openlayers.org/en/latest/examples/reprojection.html",children:"Reprojektion der Kacheln"})," in die aktuelle Kartenprojektion."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.3.2/User/Global-Config/services.json/",children:"Link zur vollst\xe4ndigen Dokumentation"})}),"\n",(0,s.jsx)(n.h2,{id:"rest-servicesjson",children:"rest-services.json"}),"\n",(0,s.jsx)(n.p,{children:"Hier werden alle Services definiert, die nicht direkt f\xfcr die visuelle Darstellung von Daten ben\xf6tigt werden:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Print services (MapFish)"}),"\n",(0,s.jsx)(n.li,{children:"Metadata sources (CSW HMDK)"}),"\n",(0,s.jsx)(n.li,{children:"BKG geocoding service"}),"\n",(0,s.jsx)(n.li,{children:"Gazetteer URL"}),"\n",(0,s.jsx)(n.li,{children:"WPS"}),"\n",(0,s.jsx)(n.li,{children:"Email Services"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": "1",\n    "name": "CSW HMDK Summary",\n    "url": "http://metaver.de/csw?service=CSW&version=2.0.2&request=GetRecordById&typeNames=csw:Record&elementsetname=summary",\n    "typ": "CSW"\n  },\n  {\n    "id": "mapfish-terrestris",\n    "name": "Testserver Print",\n    "url": "https://10.133.7.xx/print/",\n    "typ": "Print"\n  },\n  {\n    "id" : "11",\n    "name" : "Komoot Photon Suche",\n    "url" : "https://photon.komoot.io/api/?",\n    "typ" : "WFS"\n  },\n  {\n    "id" : "80002",\n    "name" : "Email Service by PHP",\n    "url" : "https://geoportal-hamburg.de/smtp/sendmail.php",\n    "typ" : "EmailService"\n  }\n]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.3.2/User/Global-Config/rest-services.json/",children:"Link zur vollst\xe4ndigen Dokumentation"})}),"\n",(0,s.jsx)(n.h2,{id:"stylejson",children:"style.json"}),"\n",(0,s.jsxs)(n.p,{children:["Vektordaten wie WFS und GeoJSON werden clientseitig gestyled (gegen\xfcber WMS und WMTS, die serverseitig gestyled werden).",(0,s.jsx)(n.br,{}),"\n","Das Masterportal liest hierzu die ",(0,s.jsx)(n.code,{children:"style.json"})," aus, in der x-beliebige Stile im Masterportal-eigenen Stil-Format definiert\nwerden. Bei der Konfiguration von Vektorlayern kann einem Layer ein bestimmter Stil zugewiesen werden, zudem k\xf6nnen diese\nStile f\xfcr dynamisch hinzugef\xfcgte Layer (w\xe4hrend der Laufzeit) sowie f\xfcr Standard-Layer, bspw. ",(0,s.jsx)(n.code,{children:"MapMarker"}),", verwendet werden."]}),"\n",(0,s.jsxs)(n.p,{children:["Jeder Stil beginnt mit einer ",(0,s.jsx)(n.code,{children:"styleID"})," und darauffolgend mit der Definition von Stilregeln."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "styleId": "blue-point",\n  "rules": [\n    {\n      "style": {\n        "circleRadius" : 6,\n        "circleStrokeColor": [51, 102, 255, 1],\n        "circleStrokeWidth": 2,\n        "circleFillColor": [51, 102, 255, 1]\n      }\n    }\n  ]\n},\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Einer Stilregel k\xf6nnen ",(0,s.jsx)(n.code,{children:"conditions"})," hinzugef\xfcgt werden, die letztendlich attributives Styling erm\xf6glichen:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "styleId": "blue-point",\n  "rules": [\n    {\n      "conditions": {\n        "properties": [\n          {\n            "attrName": "housenumber",\n            "value": [0, 100]\n          }\n        ]\n      },\n      "style": {\n        "circleRadius" : 6,\n        "circleStrokeColor": [51, 102, 255, 1],\n        "circleStrokeWidth": 2,\n        "circleFillColor": [51, 102, 255, 1]\n      }\n    }\n  ]\n},\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.3.2/User/Global-Config/style.json/#conditions",children:"Link zur vollst\xe4ndigen Beschreibung der Conditions"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.masterportal.org/mkdocs/doc/v3.3.2/User/Global-Config/style.json",children:"Link zur vollst\xe4ndigen Stil-Dokumentation"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);